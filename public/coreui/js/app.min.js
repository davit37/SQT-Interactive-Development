"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jsonContent={},formData=null,file=null,sortNumber=0,sortId=0,errorMsg=null,btnSlide=".btn-slide",categoryName="#category-name",sliderName="#slider_name",customHtml="#custom_html",staticImage="#static_image",checkHtml="#check_html",checkImage="#check_image",btnDeleteSlide=".btn-del-slide",btnSave="#btn-save",sliderIndex="slider-index",slideContent="#slide-content";function initProjectCategoryForm(){if("undefined"!=typeof projectCategoryForm){formData=new FormData;var s={path_absolute:"/e-docs/public/",selector:".mytextarea",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link  unlink | image media",relative_urls:!1,height:200,file_browser_callback:function(e,t,n,i){var o=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,l=s.path_absolute+"laravel-filemanager?field_name="+e;l+="image"==n?"&type=Images":"&type=Files",tinyMCE.activeEditor.windowManager.open({file:l,title:"Filemanager",width:.8*o,height:.8*a,resizable:"yes",close_previous:"no"})},init_instance_callback:function(e){e.on("keyup",function(e){jsonContent[$(slideContent).attr(sliderIndex)].custom_html=tinyMCE.activeEditor.getContent({format:"raw"})})}};$("#add-new").on("click",function(){jsonContent[sortNumber]={sort_number:sortNumber+1,custom_html:"",static_images:"",name:"",selected_content:"static_image",project_category_id:""},$("#template-content").append('\n               <div class="form-group slide-temp" id=\'slide-'+sortNumber+'\'>\n\n                  <div class=\'form-inline\'>\n                    \n                     <div class="input-group col-inline col-md-8">\n                        \n                           <div class="input-group-prepend">\n                              <div class="input-group-text rm-radius"><i class="fa fa-file-image-o icon-slide" aria-hidden="true"></i> </div>\n                           </div>\n                           <input type="text" class="form-control slide-name rm-radius" placeholder=\'Slider\' readonly slide-id=\''+sortNumber+'\'>\n\n                     </div>\n                     <button type="button" class="btn btn-primary my-1 rm-radius btn-slide" slide-id=\''+sortNumber+'\'><i class="fa fa-search" ></i> </button>\n                     <button type="button" class="btn btn-danger my-1 rm-radius btn-del-slide" slide-id=\''+sortNumber+'\'><i class="fa fa-times" ></i> </button>\n\n                  </div> \n               </div>\n\n      '),sortNumber++}),$(document).on("click",btnSlide,function(){$(slideContent).fadeIn("slow"),$(slideContent).attr(sliderIndex,$(this).attr("slide-id")),$(sliderName).val(jsonContent[$(this).attr("slide-id")].name),$("#lbl").html(jsonContent[$(this).attr("slide-id")].static_images),$("#holder").attr("src",base_url+jsonContent[$(this).attr("slide-id")].static_images),"static_image"===jsonContent[$(this).attr("slide-id")].selected_content?($(checkHtml).prop("checked",!1),$(checkImage).prop("checked",!0)):"custom_html"===jsonContent[$(this).attr("slide-id")].selected_content&&($(checkHtml).prop("checked",!0),$(checkImage).prop("checked",!1)),tinymce.init(s),tinymce.activeEditor.setContent(""+jsonContent[$(btnSlide).index(this)].custom_html)}),$(document).on("click",btnDeleteSlide,function(){var n=this;$(btnDeleteSlide).index(this);Swal.fire({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",width:"25rem"}).then(function(e){if(e.value)for(var t in delete jsonContent[$(n).attr("slide-id")],$(".slide-temp").eq($(btnDeleteSlide).index(n)).remove(),Swal.fire("Deleted!","Your file has been deleted.","success"),jsonContent)jsonContent[t].sort_number=$("#slide-"+t).index()+1})}),$("#template-content").sortable({tolerance:"pointer",revert:"invalid",placeholder:"form-inline col-md-10 place-temp",forceHelperSize:!0,stop:function(e,t){for(var n in jsonContent)jsonContent[n].sort_number=$("#slide-"+n).index()+1}}),$("#category-name").on("keyup",function(){$(this).hasClass("is-invalid")&&$(this).removeClass("is-invalid")}),$(staticImage).filemanager("image"),$(document).on("change","#lbl",function(){jsonContent[$(slideContent).attr(sliderIndex)].static_images=$("#lbl").html()}),$(document).on("change",sliderName,function(){jsonContent[$(slideContent).attr(sliderIndex)].name=$(this).val()}),$(document).on("keyup",sliderName,function(){$(".slide-name[slide-id='"+$(slideContent).attr(sliderIndex)+"']").val($(this).val())}),$(checkHtml).change(function(){$(this).prop("checked")||$(checkHtml).prop("checked",!0),$(".icon-slide").eq($(slideContent).attr(sliderIndex)).removeClass("fa-file-image-o").addClass("fa-code"),$(checkImage).prop("checked",!1),jsonContent[$(slideContent).attr(sliderIndex)].selected_content="custom_html"}),$(checkImage).change(function(){$(this).prop("checked")||$(checkImage).prop("checked",!0),$(".icon-slide").eq($(slideContent).attr(sliderIndex)).removeClass(" fa-code ").addClass("fa-file-image-o"),$(checkHtml).prop("checked",!1),jsonContent[$(slideContent).attr(sliderIndex)].selected_content="static_image"}),$(btnSave).click(function(){var e;formData.append("category_name",$("#category-name").val()),formData.append("jsonContent",JSON.stringify(jsonContent)),formData.append("_token",laravel_csrf),$.ajax((e={method:"POST",contentType:"application/json",dataType:"JSON",url:base_url+"/project-category/store",data:formData,async:!1,processData:!1},_defineProperty(e,"contentType",!1),_defineProperty(e,"cache",!1),e)).done(function(e){console.log(e)}).fail(function(e){errorMsg=e.responseJSON.errors,console.log(e.responseJSON.errors),$("#category-name").addClass("is-invalid"),$("#categoryname-error").html(e.responseJSON.errors)})})}}$(document).ready(function(){initProjectCategoryForm()});